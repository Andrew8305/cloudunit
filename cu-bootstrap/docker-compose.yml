version: '2'
services:

  mongo:
      container_name: cu-mongo
      env_file: .env
      image: mongo:3.4.2
      ports:
        - "27017:27017"
      volumes:
        - mongo-data:/data/db
        - mongo-config:/data/configdb
      labels:
        - "traefik.enable=false"

  traefik:
      container_name: cu-traefik
      image: traefik
      command: --web --docker --docker.domain=${CU_DOMAIN} --logLevel=DEBUG --docker.exposedbydefault=true --docker.watch=true
      environment:
          - "TZ=${TZ}"
      ports:
          - "80:80"
          - "443:443"
          - "9090:8080"
      volumes:
          - /var/run/docker.sock:/var/run/docker.sock
          - ./cu-traefik/traefik.toml:/traefik.toml
          - ./cu-traefik/certs:/certs
      labels:
        - "traefik.enable=false"

volumes:
  mongo-data:
  mongo-config:
#  gitlab-config:
#  gitlab-logs:
#  gitlab-data:
#  jenkins-home:
#  sonar-data:
#  sonar-extensions:
  traefik-certs:
#  redis-data:
#  nexus-data:

